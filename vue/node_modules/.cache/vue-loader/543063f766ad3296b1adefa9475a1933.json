{"remainingRequest":"C:\\Users\\hwang\\Desktop\\side-project\\Application-SubscribeTechBlogs\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\hwang\\Desktop\\side-project\\Application-SubscribeTechBlogs\\vue\\src\\views\\Blog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\hwang\\Desktop\\side-project\\Application-SubscribeTechBlogs\\vue\\src\\views\\Blog.vue","mtime":1623807441063},{"path":"C:\\Users\\hwang\\Desktop\\side-project\\Application-SubscribeTechBlogs\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\hwang\\Desktop\\side-project\\Application-SubscribeTechBlogs\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hwang\\Desktop\\side-project\\Application-SubscribeTechBlogs\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgICAgICAgIGZyb20gJ2F4aW9zJzsNCmltcG9ydCB7bWFwQWN0aW9uc30gZnJvbSAidnVleCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0Jsb2cnLA0KDQogIGRhdGEoKXsNCiAgICByZXR1cm4gew0KICAgICAgc2VhcmNoICA6IHsNCiAgICAgICAgcGFnZSAgIDogMCwNCiAgICAgICAgc2l6ZSAgIDogMTAsDQogICAgICAgIGNvbXBhbnk6ICcnLA0KICAgICAgICB0aXRsZSAgOiAnJw0KICAgICAgfSwNCiAgICAgIGNvbnRlbnRzOiB7fSwNCiAgICAgIHBhZ2VyICAgOiB7DQogICAgICAgIGN1cnJlbnRQYWdlICA6IDAsDQogICAgICAgIHRvdGFsICAgICAgICA6IDAsDQogICAgICAgIHRvdGFsRWxlbWVudHM6IDAsDQogICAgICB9LA0KICAgICAgZ3JvdXBzICA6IFsi7Jqw7JWE7ZWc7ZiV7KCc65OkIiwgIuy5tOy5tOyYpCIsICLslbzrhoDsnpAiLCAi65287J24IiwgIuuLueq3vOuniOy8kyIsICLrp4jsvJPsu6zrpqwiLCAi7JmT7LGgIl0sDQogICAgICBkaXNwbGF5IDogWzEwLCAzMCwgNTAsIDEwMCwgMjAwXSwNCiAgICB9DQogIH0sDQoNCiAgbW91bnRlZCgpew0KICAgIHRoaXMuZmluZENvbnRlbnRzKCk7DQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICBudW1iZXJGb3JtYXQoKXsNCiAgICAgIHJldHVybiAobnVtKSA9PiB7DQogICAgICAgIGxldCByZWdleHAgPSAvXEIoPz0oXGR7M30pKyg/IVxkKSkvZzsNCiAgICAgICAgcmV0dXJuIG51bS50b1N0cmluZygpLnJlcGxhY2UocmVnZXhwLCAnLCcpOw0KICAgICAgfTsNCiAgICB9LA0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBBY3Rpb25zKFsiZ2V0Q3VycmVudFZpc2l0b3JzIl0pLA0KDQogICAgZmluZENvbnRlbnRzKHBhZ2Upew0KICAgICAgaWYocGFnZSAhPT0gdW5kZWZpbmVkKXsNCiAgICAgICAgdGhpcy5zZWFyY2gucGFnZSA9IHBhZ2UgLSAxOw0KICAgICAgfQ0KDQogICAgICBsZXQgdXJsID0gJy9hcGkvdjEvYm9hcmRzJzsNCiAgICAgIGF4aW9zLmdldCh1cmwsIHsNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgcGFnZSAgIDogdGhpcy5zZWFyY2gucGFnZSwNCiAgICAgICAgICBzaXplICAgOiB0aGlzLnNlYXJjaC5zaXplLA0KICAgICAgICAgIGNvbXBhbnk6IHRoaXMuc2VhcmNoLmNvbXBhbnksDQogICAgICAgICAgdGl0bGUgIDogdGhpcy5zZWFyY2gudGl0bGUNCiAgICAgICAgfQ0KICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmNvbnRlbnRzID0gcmVzLmRhdGEucGFnZXMuY29udGVudDsNCg0KICAgICAgICB0aGlzLmdldEN1cnJlbnRWaXNpdG9ycyhyZXMpOw0KDQogICAgICAgIHRoaXMucGFnZXIuY3VycmVudFBhZ2UgPSByZXMuZGF0YS5wYWdlcy5udW1iZXIgKyAxOw0KICAgICAgICB0aGlzLnBhZ2VyLnRvdGFsID0gcmVzLmRhdGEucGFnZXMudG90YWxQYWdlczsNCiAgICAgICAgdGhpcy5wYWdlci50b3RhbEVsZW1lbnRzID0gcmVzLmRhdGEucGFnZXMudG90YWxFbGVtZW50czsNCg0KICAgICAgICAvLyDtjpjsnbTsp5Ug67KE6re4IOuwqeyngA0KICAgICAgICBpZih0aGlzLnNlYXJjaC5wYWdlID09PSAwICYmIHRoaXMucGFnZXIudG90YWwgPT09IDApIHJldHVybjsNCiAgICAgICAgaWYodGhpcy5zZWFyY2gucGFnZSA+PSB0aGlzLnBhZ2VyLnRvdGFsKXsNCiAgICAgICAgICB0aGlzLnNlYXJjaC5wYWdlID0gdGhpcy5wYWdlci50b3RhbCAtIDE7DQogICAgICAgICAgdGhpcy5maW5kQ29udGVudHMoKTsNCiAgICAgICAgfQ0KICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICBhbGVydCgnNDAwLCBCYWQgUmVxdWVzdCEnKQ0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIHJlc2V0U2VhcmNoRm9ybSgpew0KICAgICAgdGhpcy5zZWFyY2gucGFnZSA9IDA7DQogICAgICB0aGlzLnNlYXJjaC5zaXplID0gMTA7DQogICAgICB0aGlzLnNlYXJjaC5jb21wYW55ID0gJyc7DQogICAgICB0aGlzLnNlYXJjaC50aXRsZSA9ICcnOw0KICAgICAgdGhpcy5maW5kQ29udGVudHMoMSk7DQogICAgfSwNCg0KICAgIGlzQmV0d2VlbkRheShyZWdEYXRlKXsNCiAgICAgIGxldCByZWdEYXRlQXJyYXkgPSBTdHJpbmcocmVnRGF0ZSkuc3BsaXQoJy0nKTsNCiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUocmVnRGF0ZUFycmF5WzBdICo9IDEsIHJlZ0RhdGVBcnJheVsxXSAtIDEsIHJlZ0RhdGVBcnJheVsyXSAqPSAxKQ0KDQogICAgICBsZXQgbm93RGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgICBsZXQgYmV0d2VlbkRheSA9IE1hdGguZmxvb3IoKG5vd0RhdGUuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lKCkpIC8gMTAwMCAvIDYwIC8gNjAgLyAyNCk7DQogICAgICByZXR1cm4gYmV0d2VlbkRheSA9PT0gMDsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["Blog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Blog.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-container fill-height fluid>\r\n    <!-- search area -->\r\n    <v-row justify=\"center\">\r\n      <v-col cols=\"2\">\r\n      </v-col>\r\n      <v-col>\r\n        <v-select v-model=\"search.company\" :items=\"groups\" label=\"Group\" @change=\"findContents\"></v-select>\r\n        <v-text-field label=\"Title\" v-model=\"search.title\" @keyup.enter=\"findContents\"></v-text-field>\r\n      </v-col>\r\n      <v-col class=\"pa-3\" cols=\"3\">\r\n        <v-btn class=\"ma-3\" color=\"purple\" dark large outlined @click=\"resetSearchForm\">\r\n          <v-icon dark>fas fa-trash-restore-alt</v-icon>\r\n        </v-btn>\r\n        <br />\r\n        <v-btn class=\"ma-3\" color=\"purple\" dark large outlined @click=\"findContents\">\r\n          <v-icon dark>fas fa-search</v-icon>\r\n        </v-btn>\r\n      </v-col>\r\n      <v-col cols=\"1\">\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <!-- total post & size area -->\r\n    <v-row justify=\"center\">\r\n      <v-col cols=\"1\">\r\n      </v-col>\r\n      <v-col align-self=\"center\" class=\"text-h6\">\r\n        <v-tooltip top>\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-icon dark v-bind=\"attrs\" v-on=\"on\" large color=\"teal\">\r\n              fas fa-newspaper\r\n            </v-icon>\r\n            &nbsp;\r\n            {{ numberFormat(pager.totalElements) }}\r\n          </template>\r\n          <span>articles</span>\r\n        </v-tooltip>\r\n      </v-col>\r\n      <v-col cols=\"3\">\r\n        <v-select v-model=\"search.size\" :items=\"display\" label=\"Display\" @change=\"findContents(1);\"></v-select>\r\n      </v-col>\r\n      <v-col cols=\"1\">\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <!-- board area -->\r\n    <v-row class=\"text-center pa-3\" justify=\"center\">\r\n      <v-col>\r\n        <v-simple-table class=\"rounded-lg\" fixed-header height=\"100%\">\r\n          <template v-slot:default>\r\n            <thead>\r\n              <tr>\r\n                <th class=\"text-center rounded-tl-lg\" style=\"width: 15%;\">Group</th>\r\n                <th class=\"text-center\" style=\"width: 60%;\">Title</th>\r\n                <th class=\"text-center rounded-tr-lg\" style=\"width: 25%;\">Date</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"content in contents\">\r\n                <td>\r\n                  <div class=\"pa-2\">\r\n                    <img class=\"rounded-lg\" :src=\"content.imgPath\" height=\"48px\" width=\"96px\" :title=\"content.company\" />\r\n                  </div>\r\n                </td>\r\n                <td class=\"text-left\">\r\n                  <v-btn x-small v-show=\"isBetweenDay(content.regDate)\" class=\"ma-2\" color=\"purple\" dark>Today</v-btn>\r\n                  <a :href=\"content.link\" target=\"blank\" class=\"text-decoration-none\" style=\"color: white; font-weight: bold\">{{ content.title }}</a>\r\n                </td>\r\n                <td class=\"text-center\">{{ content.regDate }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </template>\r\n        </v-simple-table>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <!-- pagination area -->\r\n    <v-row justify=\"center\">\r\n      <v-col>\r\n        <v-pagination color=\"teal\"\r\n                      :value=\"pager.currentPage\"\r\n                      :length=\"pager.total\"\r\n                      :total-visible=\"9\"\r\n                      @input=\"findContents\"\r\n        ></v-pagination>\r\n      </v-col>\r\n    </v-row>\r\n\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios        from 'axios';\r\nimport {mapActions} from \"vuex\";\r\n\r\nexport default {\r\n  name: 'Blog',\r\n\r\n  data(){\r\n    return {\r\n      search  : {\r\n        page   : 0,\r\n        size   : 10,\r\n        company: '',\r\n        title  : ''\r\n      },\r\n      contents: {},\r\n      pager   : {\r\n        currentPage  : 0,\r\n        total        : 0,\r\n        totalElements: 0,\r\n      },\r\n      groups  : [\"우아한형제들\", \"카카오\", \"야놀자\", \"라인\", \"당근마켓\", \"마켓컬리\", \"왓챠\"],\r\n      display : [10, 30, 50, 100, 200],\r\n    }\r\n  },\r\n\r\n  mounted(){\r\n    this.findContents();\r\n  },\r\n\r\n  computed: {\r\n    numberFormat(){\r\n      return (num) => {\r\n        let regexp = /\\B(?=(\\d{3})+(?!\\d))/g;\r\n        return num.toString().replace(regexp, ',');\r\n      };\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions([\"getCurrentVisitors\"]),\r\n\r\n    findContents(page){\r\n      if(page !== undefined){\r\n        this.search.page = page - 1;\r\n      }\r\n\r\n      let url = '/api/v1/boards';\r\n      axios.get(url, {\r\n        params: {\r\n          page   : this.search.page,\r\n          size   : this.search.size,\r\n          company: this.search.company,\r\n          title  : this.search.title\r\n        }\r\n      }).then(res => {\r\n        this.contents = res.data.pages.content;\r\n\r\n        this.getCurrentVisitors(res);\r\n\r\n        this.pager.currentPage = res.data.pages.number + 1;\r\n        this.pager.total = res.data.pages.totalPages;\r\n        this.pager.totalElements = res.data.pages.totalElements;\r\n\r\n        // 페이징 버그 방지\r\n        if(this.search.page === 0 && this.pager.total === 0) return;\r\n        if(this.search.page >= this.pager.total){\r\n          this.search.page = this.pager.total - 1;\r\n          this.findContents();\r\n        }\r\n      }).catch(() => {\r\n        alert('400, Bad Request!')\r\n      });\r\n    },\r\n\r\n    resetSearchForm(){\r\n      this.search.page = 0;\r\n      this.search.size = 10;\r\n      this.search.company = '';\r\n      this.search.title = '';\r\n      this.findContents(1);\r\n    },\r\n\r\n    isBetweenDay(regDate){\r\n      let regDateArray = String(regDate).split('-');\r\n      let date = new Date(regDateArray[0] *= 1, regDateArray[1] - 1, regDateArray[2] *= 1)\r\n\r\n      let nowDate = new Date();\r\n      let betweenDay = Math.floor((nowDate.getTime() - date.getTime()) / 1000 / 60 / 60 / 24);\r\n      return betweenDay === 0;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}